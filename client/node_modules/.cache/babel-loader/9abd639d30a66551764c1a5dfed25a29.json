{"ast":null,"code":"import _defineProperty from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import CreateAccountDialog from'./CreateAccountDialog.js';import ResetPasswordDialog from'./ResetPasswordDialog.js';import AppMode from\"./../AppMode.js\";var LoginPage=/*#__PURE__*/function(_React$Component){_inherits(LoginPage,_React$Component);function LoginPage(){var _this;_classCallCheck(this,LoginPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginPage).call(this));//Create a ref for the email input DOM element\n_this.handleLoginSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var url,res,resText;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loginBtnIcon:\"fa fa-spin fa-spinner\",loginBtnLabel:\"Logging In...\"});url=\"auth/login?username=\"+_this.emailInputRef.current.value+\"&password=\"+_this.passwordInputRef.current.value;_context.next=5;return fetch(url,{method:'POST'});case 5:res=_context.sent;if(!(res.status==200)){_context.next=10;break;}//successful login!\nwindow.open(\"/\",\"_self\");_context.next=14;break;case 10:_context.next=12;return res.text();case 12:resText=_context.sent;_this.setState({loginBtnIcon:\"fa fa-sign-in\",loginBtnLabel:\"Log In\",loginMsg:resText});case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.accountCreateStatus=function(msg){_this.setState({accountCreateMsg:msg,showCreateAccountDialog:false});};_this.cancelCreateAccount=function(){_this.setState({showCreateAccountDialog:false});};_this.handleOAuthLogin=function(provider){window.open(\"/auth/\".concat(provider),\"_self\");};_this.handleOAuthLoginClick=function(provider){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,provider+\"Icon\",\"fa fa-spin fa-spinner\"),_defineProperty(_this$setState,provider+\"Label\",\"Connecting...\"),_this$setState));setTimeout(function(){return _this.handleOAuthLogin(provider);},1000);};_this.emailInputRef=React.createRef();_this.passwordInputRef=React.createRef();_this.state={accountCreateMsg:\"\",loginBtnIcon:\"fa fa-sign-in\",loginBtnLabel:\"Log In\",showCreateAccountDialog:false,showResetPasswordDialog:false,githubIcon:\"fa fa-github\",githubLabel:\"Sign in with GitHub\",loginMsg:\"\"};return _this;}//Focus cursor in email input field when mounted\n_createClass(LoginPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.emailInputRef.current.focus();}//handleLogin -- Callback function that sets up initial app state upon login.\n//handleLogin = () => {\n//Stop spinner\n//    this.setState({loginBtnIcon: \"fa fa-sign-in\",\n//                  loginBtnLabel: \"Log In\"});\n//Set current user\n//this.props.setUserId(this.emailInputRef.current.value);\n//Trigger switch to FEED mode (default app landing page)\n//this.props.changeMode(AppMode.FEED);\n//}\n//handleLoginSubmit -- Called when user clicks on login button.\n},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{id:\"login-mode-div\",className:\"padded-page\"},React.createElement(\"center\",null,React.createElement(\"h1\",null),this.state.accountCreateMsg!=\"\"?React.createElement(\"p\",{className:\"emphasis\"},this.state.accountCreateMsg):null,this.state.loginMsg!=\"\"?React.createElement(\"p\",{className:\"emphasis\"},this.state.loginMsg):null,React.createElement(\"form\",{id:\"loginInterface\",onSubmit:this.handleLoginSubmit},React.createElement(\"label\",{htmlFor:\"emailInput\",style:{padding:0,fontSize:24}},\"Email:\",React.createElement(\"input\",{ref:this.emailInputRef,className:\"form-control login-text\",type:\"email\",placeholder:\"Enter Email Address\",id:\"emailInput\",pattern:\"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\\\.[A-Za-z]{2,}\",required:true})),React.createElement(\"p\",null),React.createElement(\"label\",{htmlFor:\"passwordInput\",style:{padding:0,fontSize:24}},\"Password:\",React.createElement(\"input\",{ref:this.passwordInputRef,className:\"form-control login-text\",type:\"password\",placeholder:\"Enter Password\",pattern:\"[A-Za-z0-9!@#$%^&*()_+\\\\-]+\",required:true})),React.createElement(\"p\",{className:\"bg-danger\",id:\"feedback\",style:{fontSize:16}}),React.createElement(\"button\",{type:\"submit\",className:\"btn-color-theme btn btn-primary btn-block login-btn\"},React.createElement(\"span\",{id:\"login-btn-icon\",className:this.state.loginBtnIcon}),\"\\xA0\",this.state.loginBtnLabel),React.createElement(\"p\",null,React.createElement(\"button\",{type:\"button\",className:\"btn btn-link login-link\",onClick:function onClick(){_this2.setState({showCreateAccountDialog:true});}},\"Create an account\"),\" |\",React.createElement(\"button\",{type:\"button\",className:\"btn btn-link login-link\",onClick:function onClick(){_this2.setState({showResetPasswordDialog:true});}},\"Reset your password\")),React.createElement(\"button\",{type:\"button\",className:\"btn btn-github\",onClick:function onClick(){return _this2.handleOAuthLoginClick(\"github\");}},React.createElement(\"span\",{className:this.state.githubIcon}),\"\\xA0\",this.state.githubLabel),React.createElement(\"p\",null,React.createElement(\"i\",null,\"Version CptS 489\"))),this.state.showCreateAccountDialog?React.createElement(CreateAccountDialog,{accountCreateStatus:this.accountCreateStatus,cancelCreateAccount:this.cancelCreateAccount}):null,this.state.showResetPasswordDialog?React.createElement(ResetPasswordDialog,null):null));}}]);return LoginPage;}(React.Component);export default LoginPage;","map":{"version":3,"sources":["/Users/kevinchen/Desktop/WSU_Fall2020/Data Science/Project/FIFA-project(server)/code-ch23/client/src/components/LoginPage.js"],"names":["React","CreateAccountDialog","ResetPasswordDialog","AppMode","LoginPage","handleLoginSubmit","event","preventDefault","setState","loginBtnIcon","loginBtnLabel","url","emailInputRef","current","value","passwordInputRef","fetch","method","res","status","window","open","text","resText","loginMsg","accountCreateStatus","msg","accountCreateMsg","showCreateAccountDialog","cancelCreateAccount","handleOAuthLogin","provider","handleOAuthLoginClick","setTimeout","createRef","state","showResetPasswordDialog","githubIcon","githubLabel","focus","padding","fontSize","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CreateAccountDialog from './CreateAccountDialog.js';\nimport ResetPasswordDialog from './ResetPasswordDialog.js';\nimport AppMode from \"./../AppMode.js\";\n\nclass LoginPage extends React.Component {\n\nconstructor() {\n    super();\n    //Create a ref for the email input DOM element\n    this.emailInputRef = React.createRef();\n    this.passwordInputRef = React.createRef();\n    this.state = {accountCreateMsg: \"\",\n                  loginBtnIcon: \"fa fa-sign-in\",\n                  loginBtnLabel: \"Log In\",\n                  showCreateAccountDialog: false,\n                  showResetPasswordDialog: false,\n                  githubIcon: \"fa fa-github\",\n                  githubLabel: \"Sign in with GitHub\",\n                  loginMsg: \"\"\n                  };\n} \n    \n//Focus cursor in email input field when mounted\ncomponentDidMount() {\n    this.emailInputRef.current.focus();\n}  \n\n//handleLogin -- Callback function that sets up initial app state upon login.\n//handleLogin = () => {\n    //Stop spinner\n//    this.setState({loginBtnIcon: \"fa fa-sign-in\",\n //                  loginBtnLabel: \"Log In\"});\n    //Set current user\n    //this.props.setUserId(this.emailInputRef.current.value);\n    //Trigger switch to FEED mode (default app landing page)\n    //this.props.changeMode(AppMode.FEED);\n//}\n\n\n//handleLoginSubmit -- Called when user clicks on login button.\nhandleLoginSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({loginBtnIcon: \"fa fa-spin fa-spinner\",\n                   loginBtnLabel: \"Logging In...\"});\n    const url = \"auth/login?username=\" + this.emailInputRef.current.value +\n                \"&password=\" + this.passwordInputRef.current.value;\n    const res = await fetch(url, {method: 'POST'}); \n    if (res.status == 200) { //successful login!\n        window.open(\"/\",\"_self\");\n    } else { //Unsuccessful login\n      const resText = await res.text();\n      this.setState({loginBtnIcon: \"fa fa-sign-in\",\n                     loginBtnLabel: \"Log In\",\n                     loginMsg: resText});\n    }\n}\n\n  //accountCreateStatus -- Called by child CreateAccountDialog component when \n  //user attempted to create new account. Hide the dialog and display \n  //a message indicating result of the attempt.\n  accountCreateStatus = (msg) => {\n      this.setState({accountCreateMsg: msg,\n                     showCreateAccountDialog: false});\n  }\n\n  //cancelCreateAccount -- Called by child CreateAccountDialog componenet when user decides\n  //to cancel creation of new account by clicking the \"X\" in top-right of dialog.\n  cancelCreateAccount = () => {\n      this.setState({showCreateAccountDialog: false});\n  }\n\n//handleOAuthLogin -- Callback function that initiates contact with OAuth\n//provider\nhandleOAuthLogin = (provider) => {\n    window.open(`/auth/${provider}`,\"_self\");\n}\n\n//handleOAuthLoginClick -- Called whent the user clicks on button to\n//authenticate via a third-party OAuth service. The name of the provider is\n//passed in as a parameter.\nhandleOAuthLoginClick = (provider) => {\n   this.setState({[provider + \"Icon\"] : \"fa fa-spin fa-spinner\",\n                  [provider + \"Label\"] : \"Connecting...\"});\n   setTimeout(() => this.handleOAuthLogin(provider),1000);\n}\n\n\n  render() {\n    return(\n        <div id=\"login-mode-div\" className=\"padded-page\">\n        <center>\n            <h1 />\n            {this.state.accountCreateMsg != \"\" ? <p className=\"emphasis\">{this.state.accountCreateMsg}</p> : null}\n            {this.state.loginMsg != \"\" ? <p className=\"emphasis\">{this.state.loginMsg}</p> : null}\n            <form id=\"loginInterface\" onSubmit={this.handleLoginSubmit}>\n            <label htmlFor=\"emailInput\" style={{ padding: 0, fontSize: 24 }}>\n                Email:\n                <input\n                ref={this.emailInputRef}\n                className=\"form-control login-text\"\n                type=\"email\"\n                placeholder=\"Enter Email Address\"\n                id=\"emailInput\"\n                pattern=\"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}\"\n                required={true}\n                />\n            </label>\n            <p />\n            <label htmlFor=\"passwordInput\" style={{ padding: 0, fontSize: 24 }}>\n                Password:\n                <input\n                ref={this.passwordInputRef}\n                className=\"form-control login-text\"\n                type=\"password\"\n                placeholder=\"Enter Password\"\n                pattern=\"[A-Za-z0-9!@#$%^&*()_+\\-]+\"\n                required={true}\n                />\n            </label>\n            <p className=\"bg-danger\" id=\"feedback\" style={{ fontSize: 16 }} />\n            <button\n                type=\"submit\"\n                className=\"btn-color-theme btn btn-primary btn-block login-btn\">\n                <span id=\"login-btn-icon\" className={this.state.loginBtnIcon}/>\n                &nbsp;{this.state.loginBtnLabel}\n            </button>\n            <p>\n            <button type=\"button\" className=\"btn btn-link login-link\" \n                    onClick={() => {this.setState({showCreateAccountDialog: true});}}>\n                Create an account</button> | \n                <button type=\"button\" className=\"btn btn-link login-link\"\n                        onClick={() => {this.setState({showResetPasswordDialog: true});}}>\n                Reset your password</button>\n            </p>  \n            <button type=\"button\" className=\"btn btn-github\"\n               onClick={() => this.handleOAuthLoginClick(\"github\")}>\n              <span className={this.state.githubIcon}></span>&nbsp;\n                {this.state.githubLabel}\n            </button>\n            <p>\n                <i>Version CptS 489</i>\n            </p>\n            </form>\n            {this.state.showCreateAccountDialog ? \n              <CreateAccountDialog \n                accountCreateStatus={this.accountCreateStatus}\n                cancelCreateAccount={this.cancelCreateAccount} /> : null}\n            {this.state.showResetPasswordDialog ? <ResetPasswordDialog /> : null}\n        </center>\n        </div>\n        )\n    }\n} \n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}